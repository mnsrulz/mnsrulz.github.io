(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{458:function(e,t,a){},459:function(e,t,a){},721:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),i=a(18),s=a.n(i),o=(a(458),a(7)),l=a(93),d=(a(459),a(50)),u=a(34),j=a(754),b=a(755),p=a(784),h=a(284),m=a(423),f=a.n(m),O=a(69),x=a(422),v=a(59),g=a(753);function y(){return Object(n.jsxs)(v.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(n.jsx)(g.a,{color:"inherit",href:"https://material-ui.com/",children:"Media Catalog UI"})," ",(new Date).getFullYear(),"."]})}var w=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function S(e){var t=e.setToken,a=w(),r=function(e){t(e)};return Object(n.jsxs)(j.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(b.a,{}),Object(n.jsxs)("div",{className:a.paper,children:[Object(n.jsx)(p.a,{className:a.avatar,children:Object(n.jsx)(f.a,{})}),Object(n.jsx)(x.GoogleLogin,{clientId:"345350504609-1moo0gfi27h0jj2qaim5ed1iohgprs99.apps.googleusercontent.com",onSuccess:r,onFailure:r,cookiePolicy:"single_host_origin",scope:"profile email https://www.googleapis.com/auth/drive"})]}),Object(n.jsx)(h.a,{mt:8,children:Object(n.jsx)(y,{})})]})}var k=a(3),I=a(775),C=a(368),N=a(95),T=a(175),R=a.n(T),U=a(727),M=a(728),B=a(735),P=a(366),_=a(31),z=a(757),L=a(87),D=a(17);function E(e){return Object(n.jsx)(v.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})}function q(e,t){return{time:e,amount:t}}q("00:00",0),q("03:00",300),q("06:00",600),q("09:00",800),q("12:00",1500),q("15:00",2e3),q("18:00",2400),q("21:00",2400),q("24:00",void 0);function F(){Object(D.a)();return Object(n.jsx)("div",{children:"Charts..."})}function H(e){e.preventDefault()}var W=Object(O.a)({depositContext:{flex:1}});function A(){var e=W();return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(E,{children:"Recent Deposits"}),Object(n.jsx)(v.a,{component:"p",variant:"h4",children:"$3,024.00"}),Object(n.jsx)(v.a,{color:"textSecondary",className:e.depositContext,children:"on 15 March, 2019"}),Object(n.jsx)("div",{children:Object(n.jsx)(g.a,{color:"primary",href:"#",onClick:H,children:"View balance"})})]})}var V=a(351),J=a(354),G=a(353),X=a(756),Y=a(352);function Z(e,t,a,n,r,c){return{id:e,date:t,name:a,shipTo:n,paymentMethod:r,amount:c}}var $=[Z(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),Z(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),Z(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),Z(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),Z(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79)];function K(e){e.preventDefault()}var Q=Object(O.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function ee(){var e=Q();return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(E,{children:"Recent Orders"}),Object(n.jsxs)(V.a,{size:"small",children:[Object(n.jsx)(X.a,{children:Object(n.jsxs)(Y.a,{children:[Object(n.jsx)(G.a,{children:"Date"}),Object(n.jsx)(G.a,{children:"Name"}),Object(n.jsx)(G.a,{children:"Ship To"}),Object(n.jsx)(G.a,{children:"Payment Method"}),Object(n.jsx)(G.a,{align:"right",children:"Sale Amount"})]})}),Object(n.jsx)(J.a,{children:$.map((function(e){return Object(n.jsxs)(Y.a,{children:[Object(n.jsx)(G.a,{children:e.date}),Object(n.jsx)(G.a,{children:e.name}),Object(n.jsx)(G.a,{children:e.shipTo}),Object(n.jsx)(G.a,{children:e.paymentMethod}),Object(n.jsx)(G.a,{align:"right",children:e.amount})]},e.id)}))})]}),Object(n.jsx)("div",{className:e.seeMore,children:Object(n.jsx)(g.a,{color:"primary",href:"#",onClick:K,children:"See more orders"})})]})}var te=Object(O.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(_.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));var ae=a(9),ne=a.n(ae),re=a(15),ce=a(46),ie=a(726),se=a(763),oe=(a(764),a(765)),le=a(766),de=(a(767),a(287),a(424),a(179)),ue=a.n(de),je=(a(425),a(94)),be=a(759),pe=a(761),he=a(760),me=a(758),fe=a(20),Oe=a(762),xe=a(101),ve=a(364),ge=a(286),ye=a(238),we=a(99),Se=a.n(we);var ke=function(){var e=Se.a.create({baseURL:"https://mediacatalog.netlify.app/.netlify/functions/server/"});return e.interceptors.request.use((function(e){var t=JSON.parse(localStorage.token).tokenId;return e.headers.Authorization="Bearer "+t,e})),e}(),Ie=function(e){var t=e.open,a=e.mediaId,i=e.selectedPlaylist,s=e.onClose,l=(Object(D.a)(),Object(r.useState)([])),d=Object(o.a)(l,2),u=d[0],j=d[1];Object(r.useEffect)((function(){t&&Object(re.a)(ne.a.mark((function e(){var t;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.get("playlists");case 2:t=e.sent,j(t.data);case 4:case"end":return e.stop()}}),e)})))()}),[t]);var b=c.a.useState(i),p=Object(o.a)(b,2),h=p[0],m=p[1],f=function(e){return Object(re.a)(ne.a.mark((function t(){var n,r,c;return ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=h.indexOf(e),r=Object(fe.a)(h),c="items/".concat(a,"/playlists/").concat(e),-1!==n){t.next=10;break}return r.push(e),m(r),t.next=8,ke.put(c);case 8:t.next=14;break;case 10:return r.splice(n,1),m(r),t.next=14,ke.delete(c);case 14:case"end":return t.stop()}}),t)})))};return Object(n.jsxs)(be.a,{open:t,onClose:s,maxWidth:"sm","aria-labelledby":"responsive-dialog-title",children:[Object(n.jsx)(he.a,{children:"Playlist..."}),Object(n.jsx)(Oe.a,{style:{width:240},dividers:!0,children:Object(n.jsx)(xe.a,{children:Object(n.jsx)(ve.a,{children:u.map((function(e){return Object(n.jsx)(ge.a,{control:Object(n.jsx)(ye.a,{checked:-1!==h.indexOf(e.id),onChange:f(e.id),color:"primary",name:e.id}),label:e.title},e.id)}))})})})]})};var Ce=a(768),Ne=Object(O.a)((function(e){return{card:{position:"relative",boxShadow:"0 8px 24px 0 rgba(0,0,0,0.12)",borderRadius:"1.5rem",transition:"0.4s","&:hover":{transform:"scale(1.02)","& $shadow":{bottom:"-1.5rem"},"& $shadow2":{bottom:"-2.5rem"}}},title:{fontFamily:"'Sen', sans-serif",fontSize:"1rem",fontWeight:800,color:"#fff"},main:{maxHeight:385,overflow:"hidden",borderTopLeftRadius:"1.5rem",borderTopRightRadius:"1.5rem",zIndex:1,"&:after":{content:'""',position:"absolute",bottom:0,display:"block",width:"100%",height:"100%",background:"linear-gradient(to top, #014a7d, rgba(0,0,0,0))"}},content:{position:"absolute",bottom:0,width:"100%",zIndex:1,padding:"1.5rem 1.5rem 1rem"},tag:{display:"inline-block",fontFamily:"'Sen', sans-serif",backgroundColor:"#ff5dac",borderRadius:"0.5rem",padding:"2px 0.5rem",color:"#fff",marginBottom:"0.5rem"},avatar:{width:36,height:36},author:{position:"relative",borderBottomLeftRadius:"1.5rem",borderBottomRightRadius:"1.5rem",backgroundColor:e.palette.common.white},contentoverride:{overflow:"hidden"},titleclass:{fontSize:"0.8rem",fontWeight:500}}})),Te=function(e){var t=e.posterPath,a=e.backpath,r=e.title,c=e.year,i=e.isTv,s=(e.tagline,e.mode),o=(e.mediaItemId,e.playlistIds,e.action),l=Ne();return Object(n.jsx)("div",{children:Object(n.jsxs)(se.a,{className:l.card,children:[Object(n.jsxs)(h.a,{className:l.main,position:"relative",children:[Object(n.jsx)(oe.a,{src:"portrait"===s?"https://image.tmdb.org/t/p/w500".concat(t):a?"https://image.tmdb.org/t/p/w780/".concat(a):"https://image.tmdb.org/t/p/w500".concat(t),component:"img"}),Object(n.jsxs)("div",{className:l.content,children:[Object(n.jsx)("div",{className:l.tag,children:i?"TV":"Movie"}),Object(n.jsxs)(v.a,{variant:"h2",className:l.title,children:[r," (",c,")"]})]})]}),Object(n.jsx)(Ce.a,{className:l.author,classes:{content:l.contentoverride},avatar:Object(n.jsx)(p.a,{src:"https://image.tmdb.org/t/p/w92".concat(t)}),title:r,subheader:c,titleTypographyProps:{noWrap:!0,gutterBottom:!1},subheaderTypographyProps:{noWrap:!0},action:o})]})})},Re=a(430),Ue=a(88),Me=a(429),Be=a.n(Me),Pe=a(56),_e=a(729),ze=a(426),Le=a.n(ze),De=a(427),Ee=a.n(De),qe=a(428),Fe=a.n(qe),He=a(769),We=a(770),Ae=a(365),Ve=Object(O.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(2)},small:{width:e.spacing(3),height:e.spacing(3),color:e.palette.getContrastText(Ae.a[500]),backgroundColor:Ae.a[500],fontSize:"0.75rem"},avatarWrapper:{minWidth:0,paddingRight:e.spacing(2)}}})),Je=function e(t){var a,r=t.data,i=t.handleToggle,s=Ve(),l=c.a.useState(!1),u=Object(o.a)(l,2),j=u[0],b=u[1],h=function(){b(!j),r.loaded||r.loading||r.canExpand&&i(r,j)},m=function(){var e=r.canExpand,t=r.loading;if(e)return t?Object(n.jsx)(ie.a,{size:"1rem"}):Object(n.jsx)(N.a,{size:"small",children:j?Object(n.jsx)(Le.a,{onClick:h}):Object(n.jsx)(Ee.a,{onClick:h})});var a=r._ctx;if(a){var c="/createremoteuploads?link=".concat(encodeURIComponent(r.link),"&fileName=").concat(encodeURIComponent(r.fileName),"&parent=").concat(encodeURIComponent(r.parent),"&mediaId=").concat(encodeURIComponent(a.mediaId));return Object(n.jsx)(N.a,{size:"small",component:d.b,to:c,children:Object(n.jsx)(Fe.a,{})})}return Object(n.jsx)("div",{})};return Object(n.jsxs)(U.a,{dense:!0,component:"nav",disablePadding:!0,children:[Object(n.jsxs)(M.a,{button:!0,onClick:h,children:[Object(n.jsx)(He.a,{className:s.avatarWrapper,children:Object(n.jsx)(p.a,{className:s.small,children:function(e){var t;if(e)return null===(t=new URL(e).host[0])||void 0===t?void 0:t.toUpperCase()}(r.link)})}),Object(n.jsx)(P.a,{primary:r.name}),Object(n.jsx)(We.a,{children:Object(n.jsx)(m,{})})]}),Object(n.jsx)(_e.a,{in:j,timeout:"auto",unmountOnExit:!0,className:s.nested,children:null===r||void 0===r||null===(a=r.children)||void 0===a?void 0:a.map((function(t){return Object(n.jsx)(e,{data:t,handleToggle:i})}))})]})},Ge=a(483),Xe=function(e){var t=e.mediaId,a=e.rootTitle,c=Object(r.useState)([]),i=Object(o.a)(c,2),s=(i[0],i[1],{mediaId:t,rootTitle:a}),l=Object(r.useState)({}),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(!1),p=Object(o.a)(b,2),h=p[0],m=p[1],f=function(){var e=Object(re.a)(ne.a.mark((function e(t,a){var n,r,c,i,o,l,d,b,p,f;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&(h.active=!1),t.active=!0,t.loading||t.loaded){e.next=16;break}return t.loading=!0,t.toggled=a,j(Object.assign({},u)),n="https://nurlresolver.netlify.app/.netlify/functions/server/resolve?m=true&q=".concat(encodeURIComponent(t.link)),e.next=9,Se.a.get(n);case 9:r=e.sent,t.loading=!1,t.loaded=!0,c=Object(Pe.a)(r.data);try{for(c.s();!(i=c.n()).done;)o=i.value,l=o.isPlayable,d=o.contentType,b=o.size,p=o.link&&decodeURIComponent(new URL(o.link).pathname.split("/").pop()),f={name:o.title||p,link:o.link,children:[],canExpand:!l,loaded:!1,parent:o.parent,fileName:o.title||p,_ctx:s},l&&(f.name="".concat(f.name," (").concat(Ge(parseInt(b)||0),") (").concat(d,")")),t.children.push(f)}catch(O){c.e(O)}finally{c.f()}e.next=17;break;case 16:t.children&&(t.toggled=a);case 17:m(t),j(Object.assign({},u));case 19:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){Object(re.a)(ne.a.mark((function e(){var n,r,c,i,o,l,d;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.get("items/".concat(t,"/mediasources"));case 2:n=e.sent,r={name:a,toggled:!0,children:[],canExpand:!0,loaded:!0,_ctx:s},c=Object(Pe.a)(n.data);try{for(c.s();!(i=c.n()).done;)o=i.value,l=o.webViewLink,d=o.renderedTitle,r.children.push({name:d,link:l,children:[],canExpand:!0,loaded:!1,_ctx:s})}catch(u){c.e(u)}finally{c.f()}j(r);case 7:case"end":return e.stop()}}),e)})))()}),[t]),Object(n.jsx)("div",{children:Object(n.jsx)(Je,{data:u,handleToggle:f})})},Ye=Object(O.a)((function(e){return{dialogPaper:{minHeight:"80vh",maxHeight:"80vh"},dialogContent:{paddingLeft:0,paddingRight:0}}})),Ze=function(e){var t=e.open,a=e.mediaId,r=e.rootTitle,c=e.onClose,i=Ye(),s=Object(D.a)(),o=Object(me.a)(s.breakpoints.down("xs"));return t?Object(n.jsxs)(be.a,{fullScreen:o,open:t,onClose:c,fullWidth:!0,classes:{paper:!o&&i.dialogPaper},"aria-labelledby":"responsive-dialog-title",children:[Object(n.jsx)(he.a,{children:"Sources..."}),Object(n.jsx)(Oe.a,{dividers:!0,classes:{root:i.dialogContent},children:Object(n.jsx)(Xe,{mediaId:a,rootTitle:r})}),Object(n.jsx)(pe.a,{children:Object(n.jsx)(je.a,{color:"primary",onClick:c,children:"Cancel"})})]}):Object(n.jsx)("div",{})},$e=function(e){var t=e.movie,a=Object(r.useState)(!1),c=Object(o.a)(a,2),i=c[0],s=c[1],l=Object(r.useState)(!1),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(null),p=Object(o.a)(b,2),h=p[0],m=p[1],f=Object(n.jsxs)("div",{children:[Object(n.jsx)(N.a,{onClick:function(e){m(e.currentTarget)},children:Object(n.jsx)(Be.a,{})}),Object(n.jsxs)(Re.a,{anchorEl:h,onClose:function(){return m(null)},open:Boolean(h),children:[Object(n.jsx)(Ue.a,{onClick:function(){m(null),s(!0)},children:"Save to Playlist"}),Object(n.jsx)(Ue.a,{onClick:function(){m(null),j(!0)},children:"View Sources"})]})]}),O=Object(n.jsx)(Ie,{open:i,selectedPlaylist:t.playlistIds.map((function(e){return e.playlistId})),mediaId:t.id,onClose:function(){s(!1)}}),x=Object(n.jsx)(Ze,{open:u,mediaId:t.id,rootTitle:t.title,onClose:function(){j(!1)}});return Object(n.jsxs)("div",{children:[Object(n.jsx)(Te,{backpath:t.backdropPath,isTv:"tv"===t.itemType,posterPath:t.posterPath,title:t.title,year:t.year,tagline:t.tagline,mediaItemId:t.id,playlistIds:t.playlistIds,mode:"portrait",action:f}),O,x]})},Ke=function(e){var t=e.items,a=e.isLoading,r=t?t.map((function(e){return Object(n.jsx)(z.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(n.jsx)($e,{movie:e})},e.id)})):null;return a?Object(n.jsx)(ie.a,{disableShrink:!0}):(null===r||void 0===r?void 0:r.length)?Object(n.jsx)(z.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"flex-start",spacing:3,children:r||"hello"}):Object(n.jsx)("div",{children:"No items found"})},Qe=a(300),et=a(289),tt=a.n(et),at=a(771),nt=Object(O.a)((function(e){return{searchbar:{marginBottom:e.spacing(3)},root:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%",marginBottom:e.spacing(3)},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}));var rt=a(781),ct=a(773),it=a(774),st=a(176),ot=a(265),lt=a(266);ot.extend(lt);var dt=function(){var e=Object(u.h)().requestId,t=c.a.useState(0),a=Object(o.a)(t,2),r=a[0],i=a[1],s=["queued","running","completed","error"];return Object(n.jsxs)(L.a,{children:[Object(n.jsx)(rt.a,{value:r,onChange:function(e,t){i(t)},variant:"fullWidth",indicatorColor:"secondary",textColor:"secondary","aria-label":"icon label tabs",scrollButtons:"auto",children:s.map((function(e){return Object(n.jsx)(ct.a,{label:e})}))}),Object(n.jsx)(ut,{requestId:e,status:s[r]})]})},ut=function(e){var t=e.requestId,a=e.status,c=Object(r.useState)(!0),i=Object(o.a)(c,2),s=i[0],d=i[1],u=Object(r.useState)([]),j=Object(o.a)(u,2),b=j[0],p=j[1];Object(r.useEffect)((function(){var e=function(){var e=Object(re.a)(ne.a.mark((function e(){var n;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.get("/remoteUrlUploadRequest?status=".concat(a).concat(t?"&requestId=".concat(t):""));case 2:n=e.sent,p(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=setInterval(Object(re.a)(ne.a.mark((function t(){return ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:case"end":return t.stop()}}),t)}))),1e3);return Object(re.a)(ne.a.mark((function t(){return ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:d(!1);case 3:case"end":return t.stop()}}),t)})))(),function(){return clearInterval(n)}}),[t,a]);var m=function(){var e=Object(re.a)(ne.a.mark((function e(t){var a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.post("/remoteUrlUploadRequest/".concat(t,"/requeue"));case 2:"queued",a=b.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{status:"queued"}):e})),p(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=e.progress;if(t&&t.uploaded&&t.size){var a=100*t.uploaded/t.size;return Object(n.jsxs)(h.a,{display:"flex",alignItems:"center",style:{width:"100%"},children:[Object(n.jsx)(h.a,{width:"100%",mr:1,children:Object(n.jsx)(it.a,{variant:"determinate",value:a})}),Object(n.jsx)(h.a,{minWidth:35,children:Object(n.jsx)(v.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(a),"%")})})]})}return Object(n.jsx)("div",{})},O=[{field:"requestId",headerName:"Request",sortable:!1},{field:"fileName",sortable:!1,flex:1},{field:"sequence",sortable:!1},{field:"ts",headerName:"Created",sortable:!1,width:120,valueFormatter:function(e){var t=e.value;return ot(t).fromNow()}},{field:"id",headerName:"Progress",sortable:!1,width:150,renderCell:function(e){var t=e.value,a=e.row;if("error"===a.status)return Object(n.jsx)(je.a,{size:"small",onClick:function(){return m(t)},variant:"text",color:"primary",disableElevation:!0,children:"Requeue"});if("running"===a.status){var r=a.progress&&ot(ot()).diff(a.progress.updated,"m");return Object(n.jsx)("div",{children:r>1?Object(n.jsxs)(je.a,{size:"small",onClick:function(){return m(t)},variant:"text",color:"primary",disableElevation:!0,children:["ReRun",Object(n.jsx)(f,{progress:a.progress})]}):Object(n.jsx)(f,{progress:a.progress})})}return Object(n.jsx)("div",{})},hide:["completed","queued"].includes(a)}];return Object(n.jsx)(st.a,{autoHeight:!0,rows:b,columns:O,pageSize:10,loading:s,checkboxSelection:!1,disableColumnMenu:!0,disableColumnSelector:!0,disableSelectionOnClick:!0})},jt=a(782),bt=Object(O.a)((function(e){return{breadcrumb:{marginBottom:e.spacing(3)}}})),pt=function(e){var t=e.playlistId,a=Object(r.useState)([]),c=Object(o.a)(a,2),i=c[0],s=c[1],l=Object(r.useState)(!0),u=Object(o.a)(l,2),j=u[0],b=u[1],p=bt(),h=Object(r.useState)(""),m=Object(o.a)(h,2),f=m[0],O=m[1];return Object(r.useEffect)((function(){Object(re.a)(ne.a.mark((function e(){var a,n;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!["extramovies","hdhub"].includes(t)){e.next=5;break}O(t),e.next=9;break;case 5:return e.next=7,ke.get("playlists/".concat(t));case 7:a=e.sent,O(a.data.title);case 9:return e.next=11,ke.get("playlists/".concat(t,"/items?pageSize=100"));case 11:n=e.sent,s(n.data.items),b(!1);case 14:case"end":return e.stop()}}),e)})))()}),[t]),Object(n.jsxs)("div",{children:[Object(n.jsxs)(jt.a,{className:p.breadcrumb,children:[Object(n.jsx)(je.a,{color:"primary",component:d.b,to:"/playlist",children:"Playlists"}),Object(n.jsx)(v.a,{children:f})]}),Object(n.jsx)(Ke,{items:i,isLoading:j})]})},ht=a(265),mt=a(266);ht.extend(mt);var ft=Object(O.a)((function(e){return{root:{backgroundColor:e.palette.background.paper},navlink:{textDecoration:"none","& :visited":{color:"red"}},breadcrumb:{marginBottom:e.spacing(1)},paper:{display:"flex",overflow:"auto",flexDirection:"column"}}})),Ot=function(){var e=Object(r.useState)(!0),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),s=Object(o.a)(i,2),l=s[0],u=s[1],j=ft();return Object(r.useEffect)((function(){Object(re.a)(ne.a.mark((function e(){var t;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.get("/playlists?includeSystemDefined=true");case 2:t=e.sent,u(t.data),c(!1);case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)(jt.a,{className:j.breadcrumb,children:Object(n.jsx)(v.a,{children:"Playlist"})}),Object(n.jsx)(L.a,{className:j.paper,children:Object(n.jsx)(U.a,{component:"nav",className:j.root,"aria-label":"Playlist",children:a?Object(n.jsx)("div",{children:"Loading..."}):null===l||void 0===l?void 0:l.map((function(e){var t=e.id,a=e.title,r=e.ts;return Object(n.jsx)(M.a,{button:!0,component:d.b,to:"/playlistdetails/".concat(t),children:Object(n.jsx)(P.a,{primary:a,secondary:ht(r).fromNow()})},t)}))})})]})},xt=function(){var e=Object(u.h)().id;return e?Object(n.jsx)(pt,{playlistId:e}):Object(n.jsx)(Ot,{})},vt=a(433),gt=a(116),yt=a(117),wt=a(140),St=a(139),kt=a(434),It=a.n(kt),Ct=function(e){Object(wt.a)(a,e);var t=Object(St.a)(a);function a(e){var n;return Object(gt.a)(this,a),(n=t.call(this,e)).handleSelectionChange=function(e,t,a,r){var c=t.map((function(e){return n.state.data[e.index]}));n.state.onSelectionChange&&n.state.onSelectionChange(c)},n.state={error:null,isLoaded:!1,data:[],zipFileUrl:e.defaultZipFileUrl,onSelectionChange:e.onSelectionChange},n}return Object(yt.a)(a,[{key:"componentDidMount",value:function(){var e=Object(re.a)(ne.a.mark((function e(){var t,a,n;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://mediacatalogdirectorylisting.herokuapp.com/api/zip/listFiles?zipFileUrl=".concat(encodeURIComponent(this.state.zipFileUrl)),e.next=3,fetch(t);case 3:return a=e.sent,e.prev=4,e.next=7,a.json();case 7:n=e.sent,this.setState({isLoaded:!0,data:n}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.setState({error:e.t0});case 14:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={filterType:"checkbox",download:!1,print:!1,search:!1,viewColumns:!1,filter:!1,pagination:!1,onRowSelectionChange:this.handleSelectionChange},t=this.state,a=t.error,r=t.isLoaded,c=t.data;return a?Object(n.jsx)("div",{children:"Error: We have some errrors"}):r?Object(n.jsx)(It.a,{title:"Upload Requests",data:c,columns:["path","uncompressedSize"],options:e}):Object(n.jsx)("div",{children:"Fetching files inside zip file..."})}}]),a}(c.a.Component),Nt=function(e){var t=e.fileUrl,a=e.selectedFiles,c=e.parentUrl,i=e.title,s=e.year,l=e.mediaType,u=e.rawUpload,j=e.fileHeaders,b=Object(r.useState)(!1),p=Object(o.a)(b,2),h=p[0],m=(p[1],Object(r.useState)(!1)),f=Object(o.a)(m,2),O=f[0],x=f[1],v=JSON.parse(localStorage.token).accessToken,g=Object(r.useState)(),y=Object(o.a)(g,2),w=y[0],S=y[1];return Object(r.useEffect)((function(){Object(re.a)(ne.a.mark((function e(){var n,r,o;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.map((function(e){return e.path})),r={fileUrl:t,parentUrl:c,files:n,title:i,year:s,mediaType:l,accessToken:v,rawUpload:u,fileUrlHeaders:j},e.next=4,ke.post("remoteUrlUploadRequest",r);case 4:o=e.sent,S(o.data.id),x(!0);case 7:case"end":return e.stop()}}),e)})))()}),[a,t]),h?Object(n.jsxs)("div",{children:["Error: ",h.message]}):O?Object(n.jsxs)("span",{children:["Success! ",Object(n.jsx)(je.a,{component:d.b,to:"/remoteuploads/".concat(w),children:"View Request"})]}):Object(n.jsx)("div",{children:"Submitting Request..."})},Tt=a(228),Rt=a(779),Ut=a(776),Mt=a(777),Bt=a(778);var Pt=Object(O.a)((function(e){return{root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)}}}));var _t,zt=a(720),Lt=Object(O.a)((function(e){return{card:{marginTop:"20px",display:"flex",background:"rgba(0,0,0,.85)"},details:{display:"flex",flexDirection:"column",backgroundSize:"cover",backgroundRepeat:"no-repeat"},content:{flex:"1 0 auto",color:"white",backgroundImage:"linear-gradient(rgba(0,0,0,.85) 15%,rgba(0,0,0,.2) 40%,#000 90%)",minHeight:"500px"},posterContainer:{textAlign:"center"},poster:Object(_.a)({width:"120px"},e.breakpoints.up("md"),{width:"200px"}),tagline:{display:"block",paddingBottom:"0.25em",color:"limeGreen",fontSize:"1.3em"},metadata:{display:"block",color:"limeGreen"},additionalDetails:{margin:"35px 0 20px"}}}));function Dt(e){var t=e.data,a=(e.test,Lt()),r="https://image.tmdb.org/t/p/w500"+t.poster,c=t.production,i=t.production_countries,s=t.genre,o=t.revenue;u(c),u(i),u(s);_t="https://image.tmdb.org/t/p/original"+t.backdrop;var l="";l="undefined"===t.vote||0===t.vote?"-":t.vote,o="undefined"===o||0===o?"-":zt(t.revenue).format("($0,0)"),null==t.poster&&(r="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSols5HZxlQWyS9JY5d3_L9imbk0LiziHiyDtMZLHt_UNzoYUXs2g");var d="url(".concat(_t,")");return Object(n.jsx)("div",{children:Object(n.jsx)(se.a,{className:a.card,children:Object(n.jsx)("div",{className:a.details,style:{backgroundImage:d},children:Object(n.jsxs)(le.a,{className:a.content,children:[Object(n.jsx)(v.a,{component:"h3",variant:"h3",children:t.original_title}),Object(n.jsx)(v.a,{component:"h6",variant:"h6",className:a.tagline,children:t.tagline}),Object(n.jsx)(v.a,{variant:"subtitle1",children:Object(n.jsxs)(z.a,{container:!0,children:[Object(n.jsxs)(z.a,{item:!0,xs:9,children:[t.overview,Object(n.jsxs)(z.a,{container:!0,className:a.additionalDetails,children:[Object(n.jsxs)(z.a,{item:!0,md:3,children:["Original Release: ",Object(n.jsx)("span",{className:a.metadata,children:t.release}),"Box Office: ",Object(n.jsx)("span",{className:a.metadata,children:o})]}),Object(n.jsxs)(z.a,{item:!0,md:3,children:["Running Time: ",Object(n.jsxs)("span",{className:a.metadata,children:[t.runtime," mins"]}),"Rating: ",Object(n.jsx)("span",{className:a.metadata,children:l})]})]})]}),Object(n.jsx)(z.a,{item:!0,xs:3,className:a.posterContainer,children:Object(n.jsx)("img",{src:r,className:a.poster})})]})})]})})})});function u(e){var t=[];return void 0!==e&&e.forEach((function(e){t.push(e.name)})),t.join(", ")}}var Et=function(e){Object(wt.a)(a,e);var t=Object(St.a)(a);function a(e){var n;return Object(gt.a)(this,a),(n=t.call(this,e)).handleChange=function(e){return n.setState(Object(_.a)({},e.target.name,e.target.value))},n.findMovieIdByImdbId=function(){var e=Object(re.a)(ne.a.mark((function e(t){var a,n,r;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.themoviedb.org/3/find/".concat(t,"?&api_key=cfe422613b250f702980a3bbf9e90716&external_source=imdb_id"),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r.movie_results&&r.movie_results[0]&&r.movie_results[0].id);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.fetchMovieID=function(){var e=Object(re.a)(ne.a.mark((function e(t){var a,r,c;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,n.setState({imdbId:a}),e.next=4,n.findMovieIdByImdbId(a);case 4:(r=e.sent)&&(c="https://api.themoviedb.org/3/movie/".concat(r,"?&api_key=cfe422613b250f702980a3bbf9e90716"),n.fetchApi(c));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={error:null,isLoaded:!1,data:null,imdbId:"tt0468569"},n}return Object(yt.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{id:"createMovieContainer000001",children:[Object(n.jsx)(Tt.a,{name:"imdbId",label:"IMDB Id",placeholder:"Enter IMDB Id",fullWidth:!0,onChange:this.fetchMovieID,defaultValue:this.state.imdbId}),Object(n.jsx)(Dt,{data:this.state})]})}},{key:"fetchApi",value:function(e){var t=this;fetch(e).then((function(e){return e.json()})).then((function(e){t.setState({movieID:e.id,original_title:e.original_title,tagline:e.tagline,overview:e.overview,homepage:e.homepage,poster:e.poster_path,production:e.production_companies,production_countries:e.production_countries,genre:e.genres,release:e.release_date,vote:e.vote_average,runtime:e.runtime,revenue:e.revenue,backdrop:e.backdrop_path})}))}},{key:"componentDidMount",value:function(){var e=Object(re.a)(ne.a.mark((function e(){var t,a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findMovieIdByImdbId(this.state.imdbId);case 2:t=e.sent,a="https://api.themoviedb.org/3/movie/".concat(t,"?&api_key=cfe422613b250f702980a3bbf9e90716"),this.fetchApi(a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(r.Component);function qt(e){var t=e.value;return Object(n.jsx)(v.a,{variant:"body2",color:"textSecondary",children:function(){switch(t){case"hdhub":return"HH";case"extramovies":return"EM";default:return t}}()})}var Ft=a(181),Ht=a(417),Wt=a(437),At=a.n(Wt),Vt=a(5),Jt="cfe422613b250f702980a3bbf9e90716";var Gt=function(){var e=Se.a.create({baseURL:"https://api.themoviedb.org/3"});return{findMovie:function(e){},findImdbId:function(){var t=Object(re.a)(ne.a.mark((function t(a,n){var r,c;return ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(n?"tv":"movie","/").concat(a,"?api_key=").concat(Jt,"&language=en-US&append_to_response=external_ids"),t.next=3,e.get(r);case 3:return c=t.sent,t.abrupt("return",c.data.external_ids.imdb_id);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),search:function(){var t=Object(re.a)(ne.a.mark((function t(a,n){var r,c;return ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="search/".concat(n?"tv":"movie","?api_key=").concat(Jt,"&language=en-US&&query=").concat(encodeURIComponent(a)),t.next=3,e.get(r);case 3:return c=t.sent,t.abrupt("return",c.data);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}(),Xt=a(237),Yt=a.n(Xt),Zt=a(436),$t=a.n(Zt),Kt=Object(O.a)((function(e){return{searchbar:{marginBottom:e.spacing(3)},dialogPaper:{minHeight:"80vh",maxHeight:"80vh"}}})),Qt=function(e){var t=e.handleSelect,a=e.show,c=e.query,i=e.isTv,s=Object(r.useState)(c),l=Object(o.a)(s,2),d=l[0],u=l[1],j=Object(r.useState)(i),b=Object(o.a)(j,2),h=b[0],m=b[1],f=Object(r.useState)([]),O=Object(o.a)(f,2),x=O[0],v=O[1],g=Object(r.useState)(0),y=Object(o.a)(g,2),w=y[0],S=y[1],k=Kt(),I=function(){t(null)};Object(r.useEffect)((function(){d&&a&&Object(re.a)(ne.a.mark((function e(){var t,a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(h),e.next=3,Gt.search(d,h);case 3:t=e.sent,a=t.results,v(a);case 6:case"end":return e.stop()}}),e)})))()}),[d,a,h]);var C=Object(r.useState)(i?1:0),N=Object(o.a)(C,2),T=N[0],R=N[1];return Object(n.jsx)("div",{children:Object(n.jsxs)(be.a,{open:a,fullWidth:!0,classes:{paper:k.dialogPaper},onClose:I,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(he.a,{style:{padding:0},children:Object(n.jsxs)(rt.a,{value:T,onChange:function(e,t){R(t),m(1===t),S(0)},variant:"fullWidth",indicatorColor:"secondary",textColor:"secondary",children:[Object(n.jsx)(ct.a,{icon:Object(n.jsx)(Yt.a,{}),label:"MOVIES"}),Object(n.jsx)(ct.a,{icon:Object(n.jsx)($t.a,{}),label:"TV"})]})}),Object(n.jsxs)(Oe.a,{dividers:!0,children:[Object(n.jsx)(Tt.a,{autoFocus:!0,margin:"dense",label:"Title",defaultValue:d,fullWidth:!0,onChange:Object(ce.a)((function(e){var t=e.target.value;u(t)}),250)}),x&&Object(n.jsx)(U.a,{component:"nav",children:x.map((function(e){var t;return Object(n.jsxs)(M.a,{button:!0,selected:w===e.id,onClick:function(){return S(e.id)},children:[Object(n.jsx)(He.a,{children:Object(n.jsx)(p.a,{src:e.poster_path&&"https://image.tmdb.org/t/p/w92".concat(e.poster_path)})}),Object(n.jsx)(P.a,{primary:"".concat(e.title||e.name),secondary:null===(t=e.release_date||e.first_air_date)||void 0===t?void 0:t.substr(0,4)})]},e.id)}))})]}),Object(n.jsxs)(pe.a,{children:[Object(n.jsx)(je.a,{onClick:I,color:"primary",children:"Cancel"}),Object(n.jsx)(je.a,{onClick:function(){t({id:w,isTv:h})},color:"primary",disabled:0===w,children:"Ok"})]})]})})},ea=Object(O.a)((function(e){return{dialogPaper:{minHeight:"80vh",maxHeight:"80vh"}}})),ta=function(e){var t=e.show,a=e.mediaItemId,c=e.query,i=e.handleSelect,s=e.items,l=ea(),d=Object(r.useState)([]),u=Object(o.a)(d,2),j=u[0],b=u[1],p=function(){i()};Object(r.useEffect)((function(){var e=(null===s||void 0===s?void 0:s.map((function(e){return e.id})))||[];b(e)}),[s]);var h=function(e){return function(){var t=j.indexOf(e),a=Object(fe.a)(j);-1===t?a.push(e):a.splice(t,1),b(a)}},m=function(){var e=Object(re.a)(ne.a.mark((function e(){var t,n,r;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(Pe.a)(j),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,ke.put("/mediasources/".concat(r,"/mediaItemId/").concat(a));case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:i(j);case 18:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsxs)(be.a,{open:t,fullWidth:!0,classes:{paper:l.dialogPaper},onClose:p,"aria-labelledby":"form-dialog-title",children:[Object(n.jsxs)(he.a,{children:["Related media items to ",c]}),Object(n.jsx)(Oe.a,{dividers:!0,children:s&&Object(n.jsx)(U.a,{children:s.map((function(e){var t="checkbox-list-label-".concat(e.id);return console.log("value is ",e),Object(n.jsxs)(M.a,{button:!0,onClick:h(e.id),children:[Object(n.jsx)(B.a,{children:Object(n.jsx)(ye.a,{edge:"start",checked:-1!==j.indexOf(e.id),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(n.jsx)(P.a,{id:t,primary:e.renderedTitle})]},e.id)}))})}),Object(n.jsxs)(pe.a,{children:[Object(n.jsx)(je.a,{onClick:p,color:"primary",children:"Cancel"}),Object(n.jsx)(je.a,{onClick:m,color:"primary",children:"Ok"})]})]})})},aa=a(290),na=a.n(aa),ra=Object(O.a)((function(e){return{root:{display:"flex",width:320,height:162},details:{display:"flex",flexDirection:"column",flex:.65},content:{flex:"1 0 auto"},cover:{display:"flex",flex:.35},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},playIcon:{height:38,width:38},posterMedia:{height:0,paddingTop:"56.25%"},removeIcon:{margin:e.spacing(1)}}})),ca=Object(Vt.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 1)",padding:0,borderRadius:"1.5rem"}}}))(Ft.a),ia=function(e){var t=e.value,a=e.isTv,c=e.mediaSourceId,i=e.mediaItemId,s=e.handleMediaAssignment,l=e.handleMediaSourceWithdrawl,d=Object(r.useState)(""),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(r.useState)(""),m=Object(o.a)(h,2),f=m[0],O=m[1],x=Object(r.useState)(""),v=Object(o.a)(x,2),g=v[0],y=v[1],w=Object(r.useState)(""),S=Object(o.a)(w,2),k=(S[0],S[1]),I=Object(r.useState)(t),C=Object(o.a)(I,2),T=C[0],R=C[1],U=Object(r.useState)(""),M=Object(o.a)(U,2),B=M[0],P=M[1],_=Object(r.useState)(""),z=Object(o.a)(_,2),L=(z[0],z[1]),D=Object(r.useState)(!1),E=Object(o.a)(D,2),q=E[0],F=E[1],H=Object(r.useState)(),W=Object(o.a)(H,2),A=W[0],V=W[1],J=ra(),G=Object(r.useState)(!0),X=Object(o.a)(G,2),Y=X[0],Z=X[1],$=Object(r.useState)(!1),K=Object(o.a)($,2),Q=K[0],ee=K[1],te=Object(r.useState)([]),ae=Object(o.a)(te,2),ce=ae[0],ie=ae[1],se=Object(r.useState)(!1),oe=Object(o.a)(se,2),le=oe[0],de=oe[1];Object(r.useEffect)((function(){t&&Object(re.a)(ne.a.mark((function e(){var n,r,c,i;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gt.search(t,a);case 2:n=e.sent,(r=n.results)[0]&&(F(!0),V(r[0]),R(r[0].title||r[0].name),b("https://image.tmdb.org/t/p/".concat("w92").concat(r[0].poster_path)),k("https://image.tmdb.org/t/p/".concat("w185").concat(r[0].poster_path)),O(r[0].backdrop_path),y(r[0].poster_path),P((null===(c=r[0].release_date)||void 0===c?void 0:c.substr(0,4))||(null===(i=r[0].first_air_date)||void 0===i?void 0:i.substr(0,4))),L(r[0].overview)),Z(!1);case 6:case"end":return e.stop()}}),e)})))()}),[t]);var ue=q?Object(n.jsx)(At.a,{}):null,je=function(){var e=Object(re.a)(ne.a.mark((function e(){var t;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=A.id,e.next=3,be(t,a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(re.a)(ne.a.mark((function e(a,n){var r,i,o,l;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.get("/items/byExternalId/".concat(a,"?type=tmdb"));case 3:i=e.sent,r=i.data.id,e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,ke.post("items/byExternalId/".concat(a,"?type=tmdb&tmdbHint=").concat(n?"tv":"movie"));case 11:o=e.sent,r=o.data.id;case 13:return e.next=15,ke.put("/mediasources/".concat(c,"/mediaItemId/").concat(r));case 15:return s&&s([{mediaItemId:r,mediaSourceId:c}]),e.next=18,ke.get("mediasources?parsedTitle=".concat(encodeURIComponent(t),"&onlyPendingMediaAssignment=true"));case 18:(l=e.sent).data.items&&l.data.items.length>0&&(ie(l.data.items),de(!0));case 20:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),pe=function(){var e=Object(re.a)(ne.a.mark((function e(t){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee(!1),!t){e.next=4;break}return e.next=4,be(t.id,t.isTv);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(re.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.delete("mediasources/".concat(c,"/mediaItemId/").concat(i));case 2:l(c);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=Object(n.jsx)(Te,{title:T,backpath:f,isTv:a,year:B,posterPath:g}),fe=Object(n.jsx)(Ht.a,{size:"medium",avatar:Object(n.jsx)(p.a,{src:j}),color:"primary",label:T||t,variant:"outlined",onClick:function(){ee(!0)},onDelete:q?je:null,deleteIcon:ue,style:{maxWidth:240},clickable:!0});return i?Object(n.jsxs)("div",{children:[Object(n.jsx)(ta,{show:le,mediaItemId:i,query:t,items:ce,handleSelect:function(e){if(de(!1),e){var t=e.map((function(e){return{mediaItemId:i,mediaSourceId:e}}));s&&s(t)}}}),Object(n.jsx)("span",{children:i}),Object(n.jsx)(N.a,{color:"primary","aria-label":"remove link",size:"small",className:J.removeIcon,onClick:he,children:Object(n.jsx)(na.a,{fontSize:"small"})})]}):Y?Object(n.jsx)("div",{children:"Loading..."}):q?Object(n.jsxs)("div",{children:[Object(n.jsx)(Qt,{show:Q,query:T,isTv:a,handleSelect:pe}),Object(n.jsx)(ca,{interactive:!0,title:me,enterDelay:500,placement:"right",arrow:!0,children:fe})]}):Object(n.jsxs)("div",{children:[Object(n.jsx)(Qt,{show:Q,query:T||t,isTv:a,handleSelect:pe}),fe]})},sa=a(785),oa=a(780),la=a(265),da=a(266);la.extend(da);var ua=Object(O.a)((function(e){return{searchbar:{marginBottom:e.spacing(3)}}})),ja=a(438),ba=a.n(ja),pa=a(297),ha=a.n(pa),ma=a(439),fa=a.n(ma),Oa=a(296),xa=a.n(Oa),va=a(440),ga=a.n(va),ya=[{path:"/dashboard",sidebarName:"Dashboard",component:function(){var e=te(),t=c.a.useState(!0),a=Object(o.a)(t,2),r=(a[0],a[1],Object(k.default)(e.paper,e.fixedHeight));return Object(n.jsxs)(z.a,{container:!0,spacing:3,children:[Object(n.jsx)(z.a,{item:!0,xs:12,md:8,lg:9,children:Object(n.jsx)(L.a,{className:r,children:Object(n.jsx)(F,{})})}),Object(n.jsx)(z.a,{item:!0,xs:12,md:4,lg:3,children:Object(n.jsx)(L.a,{className:r,children:Object(n.jsx)(A,{})})}),Object(n.jsx)(z.a,{item:!0,xs:12,children:Object(n.jsx)(L.a,{className:e.paper,children:Object(n.jsx)(ee,{})})})]})},icon:ba.a},{path:"/preferences",sidebarName:"Preferences",component:function(){return Object(n.jsx)("h2",{children:"Preferences"})},icon:xa.a,hide:!0},{path:"/movies",sidebarName:"Media Items",component:function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!0),s=Object(o.a)(i,2),l=s[0],d=s[1],u=Object(r.useState)(""),j=Object(o.a)(u,2),b=j[0],p=j[1],h=nt(),m=Object(r.useState)(null),f=Object(o.a)(m,2),O=(f[0],f[1]);return Object(r.useEffect)((function(){Object(re.a)(ne.a.mark((function e(){var t,a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b,d(!0),e.next=4,ke.get("items?q=".concat(t));case 4:a=e.sent,b===t&&(c(a.data),d(!1));case 6:case"end":return e.stop()}}),e)})))()}),[b]),Object(n.jsxs)("div",{children:[Object(n.jsxs)(L.a,{component:"form",className:h.root,children:[Object(n.jsx)(Qe.a,{className:h.input,placeholder:"Search",onChange:Object(ce.a)((function(e){var t=e.target.value;p(t)}),250),defaultValue:b}),Object(n.jsx)(N.a,{type:"submit",className:h.iconButton,"aria-label":"search",children:Object(n.jsx)(tt.a,{})}),Object(n.jsx)(at.a,{className:h.divider,orientation:"vertical"}),Object(n.jsx)(N.a,{color:"primary",className:h.iconButton,"aria-label":"menu",onClick:function(e){O(e.currentTarget)},children:Object(n.jsx)(R.a,{})})]}),Object(n.jsx)(Ke,{items:a,isLoading:l})]})},icon:Yt.a},{path:"/remoteuploads/:requestId",sidebarName:"Remote Url Upload",component:dt,icon:ha.a,hide:!0},{path:"/remoteuploads",sidebarName:"Remote Url Upload",component:dt,icon:ha.a},{path:"/createremoteuploads",sidebarName:"New Remote Url Upload",component:function(){var e=Object(vt.a)(),t=(e.control,e.register,e.handleSubmit,e.errors,Pt()),a=new URLSearchParams(Object(u.g)().search),c=Object(r.useState)(a.get("fileName")||""),i=Object(o.a)(c,2),s=i[0],l=i[1],d=Object(r.useState)(a.get("parent")||""),j=Object(o.a)(d,2),b=j[0],p=(j[1],Object(r.useState)()),h=Object(o.a)(p,2),m=h[0],f=h[1],O=Object(r.useState)(),x=Object(o.a)(O,2),g=x[0],y=x[1],w=Object(r.useState)(),S=Object(o.a)(w,2),k=S[0],I=S[1],C=Object(r.useState)({}),N=Object(o.a)(C,2),T=N[0],R=N[1],U=a.get("mediaId"),M=Object(r.useState)(0),B=Object(o.a)(M,2),P=B[0],_=B[1],z=Object(r.useState)(a.get("link")),D=Object(o.a)(z,2),E=D[0],q=D[1],F=Object(r.useState)([]),H=Object(o.a)(F,2),W=H[0],A=H[1],V=Object(r.useState)(!0),J=Object(o.a)(V,2),G=J[0],X=J[1],Y=s&&s.split(".").pop();Object(r.useEffect)((function(){U&&Object(re.a)(ne.a.mark((function e(){var t,a,n,r,c;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.get("items/".concat(U));case 2:t=e.sent,a=t.data,n=a.itemType,r=a.title,c=a.year,f(n),I(c),y(r);case 7:case"end":return e.stop()}}),e)})))()}),[U]),Object(r.useEffect)((function(){b&&Object(re.a)(ne.a.mark((function e(){var t,a,n,r,c,i;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://nurlresolver.netlify.app/.netlify/functions/server/resolve?m=true&q=".concat(encodeURIComponent(b)),e.next=3,Se.a.get(t);case 3:1===(a=e.sent).data.length?(n=a.data[0],r=n.headers,c=n.title,i=n.link,l(c),q(i),R(r)):alert("invalid response received!");case 5:case"end":return e.stop()}}),e)})))()}),[b]);var Z=function(e){A(e)},$=["Enter the file URL (any types including zip)","Choose Files to Upload","Finish"];function K(e){switch(e){case 0:return Object(n.jsxs)("div",{children:[Object(n.jsx)(Tt.a,{name:"fileUrl",type:"URL",defaultValue:E,fullWidth:!0,onChange:function(e){return q(e.target.value)}}),Object(n.jsxs)("p",{children:["Parent: ",b]}),Object(n.jsxs)("p",{children:["Media Type: ",m]}),Object(n.jsxs)("p",{children:["Title: ",g]}),Object(n.jsxs)("p",{children:["Year: ",k]}),Object(n.jsx)("p",{children:JSON.stringify(T)}),Object(n.jsx)(ge.a,{control:Object(n.jsx)(ye.a,{name:"rawUpload",checked:G,onChange:function(e){return X(e.target.checked)},disabled:"zip"!==Y}),label:"Raw Upload"})]});case 1:return Object(n.jsx)(Ct,{defaultZipFileUrl:E,onSelectionChange:Z});case 2:return Object(n.jsx)(Nt,{selectedFiles:W,fileUrl:E,parentUrl:b,mediaType:m,title:g,year:k,rawUpload:G,fileHeaders:T});default:return"unknown step"}}var Q=function(){0===P&&G?(A([{path:s}]),_(2)):_((function(e){return e+1}))},ee=function(){_(2===P&&G?0:function(e){return e-1})};return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsx)(Rt.a,{activeStep:P,orientation:"vertical",children:$.map((function(e,a){return Object(n.jsxs)(Ut.a,{children:[Object(n.jsx)(Mt.a,{children:e}),Object(n.jsxs)(Bt.a,{children:[Object(n.jsx)(v.a,{children:K(a)}),Object(n.jsx)("div",{className:t.actionsContainer,children:Object(n.jsxs)("div",{children:[Object(n.jsx)(je.a,{disabled:0===P,onClick:ee,className:t.button,children:"Back"}),Object(n.jsx)(je.a,{variant:"contained",color:"primary",onClick:Q,className:t.button,children:P===$.length-1?"Finish":"Next"})]})})]})]},e)}))}),P===$.length&&Object(n.jsxs)(L.a,{square:!0,elevation:0,className:t.resetContainer,children:[Object(n.jsx)(v.a,{children:"All steps completed - you're finished"}),Object(n.jsx)(je.a,{onClick:function(){_(0)},className:t.button,children:"Reset"})]})]})})},icon:fa.a},{path:"/playlist",sidebarName:"Playlist",component:xt,icon:ue.a},{path:"/playlistdetails/:id",sidebarName:"Playlist",component:xt,icon:ue.a,hide:!0},{path:"/movie/new",sidebarName:"New Movie by IMDB Id",component:Et,icon:xa.a,hide:!0},{path:"/source",sidebarName:"Media Source",component:function(){var e=Object(r.useState)(0),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(20),s=Object(o.a)(i,1)[0],l=Object(r.useState)([]),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(0),p=Object(o.a)(b,2),h=p[0],m=p[1],f=Object(r.useState)(!1),O=Object(o.a)(f,2),x=O[0],v=O[1],g=Object(r.useState)(""),y=Object(o.a)(g,2),w=y[0],S=y[1],k=Object(r.useState)("Pending"),I=Object(o.a)(k,2),C=I[0],N=I[1],T=ua(),R=function(){var e=Object(re.a)(ne.a.mark((function e(t){var a;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=u.map((function(e){var a=t.find((function(t){return t.mediaSourceId===e.id}));return a&&(e.mediaItemId=a.mediaItemId),e})),j(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=u.map((function(t){return t.id===e&&(t.mediaItemId=null),t}));j(t)},M=[{field:"renderedTitle",headerName:"Title",width:340,sortable:!1,flex:1},{field:"parserInfo",headerName:"Parser Title",sortable:!1,width:280,renderCell:function(e){var t=e.value,a=e.row;return Object(n.jsx)(ia,{value:(null===t||void 0===t?void 0:t.title)||a.renderedTitle,isTv:null===t||void 0===t?void 0:t.isTv,mediaSourceId:a.id,mediaItemId:a.mediaItemId,handleMediaAssignment:R,handleMediaSourceWithdrawl:U})}},{field:"crawlerType",headerName:"Source",sortable:!1,width:80,renderCell:function(e){var t=e.value;return Object(n.jsx)(qt,{value:t})}},{field:"created",headerName:"Created",sortable:!1,width:120,valueFormatter:function(e){var t=e.value;return la(t).fromNow()}},{field:"modified",headerName:"Last Modified",sortable:!1,width:120,valueFormatter:function(e){var t=e.value;return la(t).fromNow()}}];Object(r.useEffect)((function(){Object(re.a)(ne.a.mark((function e(){var t,n;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),t="Pending"===C,e.next=4,ke.get("/mediasources?pageSize=".concat(s,"&pageNumber=").concat(a+1,"&q=").concat(w,"&onlyPendingMediaAssignment=").concat(t));case 4:n=e.sent,m(n.data.total),j(n.data.items),v(!1);case 8:case"end":return e.stop()}}),e)})))()}),[a,w,C,s]);return Object(n.jsxs)("div",{children:[Object(n.jsx)(Tt.a,{label:"Search",placeholder:"Search",fullWidth:!0,onChange:Object(ce.a)((function(e){var t=e.target.value;c(0),S(t)}),250),defaultValue:w,className:T.searchbar}),Object(n.jsxs)(sa.a,{value:C,exclusive:!0,onChange:function(e,t){return N(t)},children:[Object(n.jsx)(oa.a,{value:"All",children:"All"}),Object(n.jsx)(oa.a,{value:"Pending",children:"Pending"})]}),Object(n.jsx)(st.a,{page:a,autoHeight:!0,rows:u,columns:M,pageSize:s,paginationMode:"server",onPageChange:function(e){var t=e.page;c(t)},loading:x,rowCount:h,checkboxSelection:!1,disableColumnMenu:!0,disableColumnSelector:!0,disableSelectionOnClick:!0})]})},icon:ga.a}],wa=Object(u.i)((function(e){var t=e.location,a=e.onListItemClick;return Object(n.jsx)("div",{children:Object(n.jsx)(U.a,{children:ya.filter((function(e){return!e.hide})).map((function(e,r){return Object(n.jsxs)(M.a,{component:d.b,button:!0,to:e.navurl||e.path,style:{textDecoration:"none"},onClick:a,selected:(c=e.path,(null===t||void 0===t?void 0:t.pathname)===c),children:[Object(n.jsx)(B.a,{children:Object(n.jsx)(e.icon,{})}),Object(n.jsx)(P.a,{primary:e.sidebarName})]},r);var c}))})})}));function Sa(){return Object(n.jsx)("h2",{children:"Not Found!!!"})}var ka=a(70),Ia=a(217),Ca=a.n(Ia),Na=Object(O.a)((function(e){return{toolbarIcon:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(_.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)})}})),Ta=function(e){var t=e.open,a=e.handleDrawerClose,r=e.hiddenDrawerVariant,c=Na();return Object(n.jsxs)(ka.a,{variant:r?"temporary":"permanent",classes:{paper:Object(k.default)(c.drawerPaper,!t&&c.drawerPaperClose)},open:t,children:[Object(n.jsx)("div",{className:c.toolbarIcon,children:Object(n.jsx)(N.a,{onClick:a,children:Object(n.jsx)(Ca.a,{})})}),Object(n.jsx)(at.a,{}),Object(n.jsx)(wa,{onListItemClick:r&&a})]})},Ra=Object(O.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(l.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));var Ua=function(){var e=function(){Object(r.useEffect)((function(){var t=window.setInterval((function(){console.log("checking token status",t),n&&null==e()&&c(null)}),1e3);return function(){return clearInterval(t)}}),[]);var e=function(){var e,t=localStorage.getItem("token"),a=JSON.parse(t);return(null===a||void 0===a||null===(e=a.tokenObj)||void 0===e?void 0:e.expires_at)&&new Date(a.tokenObj.expires_at)>new Date?a:null},t=Object(r.useState)(e()),a=Object(o.a)(t,2),n=a[0],c=a[1];return{setToken:function(t){localStorage.setItem("token",JSON.stringify(t));var a=e();a&&c(a)},token:n}}(),t=e.token,a=e.setToken,i=Ra(),s=Object(D.a)(),l=Object(me.a)(s.breakpoints.down("sm")),p=c.a.useState(!1),m=Object(o.a)(p,2),f=m[0],O=m[1];return Object(k.default)(i.paper,i.fixedHeight),t?Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsxs)("div",{className:i.root,children:[Object(n.jsx)(b.a,{}),Object(n.jsx)(I.a,{position:"absolute",className:Object(k.default)(i.appBar,f&&i.appBarShift),children:Object(n.jsxs)(C.a,{className:i.toolbar,children:[Object(n.jsx)(N.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){O(!0)},className:Object(k.default)(i.menuButton,f&&i.menuButtonHidden),children:Object(n.jsx)(R.a,{})}),Object(n.jsx)(v.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:i.title,children:"Media Catalog Admin"})]})}),Object(n.jsxs)(d.a,{children:[Object(n.jsx)(Ta,{open:f,handleDrawerClose:function(){O(!1)},hiddenDrawerVariant:l}),Object(n.jsxs)("main",{className:i.content,children:[Object(n.jsx)("div",{className:i.appBarSpacer}),Object(n.jsxs)(j.a,{maxWidth:"lg",className:i.container,children:[Object(n.jsxs)(u.d,{children:[Object(n.jsx)(u.b,{exact:!0,path:"/",render:function(){return Object(n.jsx)(u.a,{to:"/dashboard"})}}),ya.map((function(e,t){return Object(n.jsx)(u.b,{path:e.path,children:Object(n.jsx)(e.component,{})},t)})),Object(n.jsx)(u.b,{children:Object(n.jsx)(Sa,{})})]}),Object(n.jsx)(h.a,{pt:4,children:Object(n.jsx)(y,{})})]})]})]})]})}):Object(n.jsx)(S,{setToken:a})},Ma=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,786)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(Ua,{})}),document.getElementById("root")),Ma()}},[[721,1,2]]]);
//# sourceMappingURL=main.594bcbfc.chunk.js.map